{% extends 'template.html'%} {%block titulo%} Editar Grupo {%endblock%} {%block
    cuerpo%}
    <div class="col-md-12 d-flex justify-content-center align-items-center" style="height: 100vh">
      <div class="col-md-6 bg-white rounded py-3 px-5 d-flex justify-content-center align-items-center flex-column">
        <p class="fs-2">Editar Grupo</p>
        <div class="d-flex justify-content-between align-items-center mb-3" style="width:100%">
          <input type="text" class="form-control" value="{{registro.nombre}}" style="margin-right:5px" placeholder="Nombre" aria-label="Nombre"
            id="nombre" />
          <input type="text" class="form-control" disabled value="{{registro.codigo}}" style="margin-left:5px" placeholder="Codigo" aria-label="Codigo"
            id="codigo" />
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3" style="width:100%">
          <div style="width:100%; margin-right:5px">
            <label for="horaInicio" class="form-label">Fecha de inicio</label>
            <input id="fechaInicio" type="date" class="form-control" value="{{registro.fecha_inicial}}" placeholder="Fecha inicio" aria-label="Fecha inicio" />
          </div>
          <div style="width:100%; margin-left:5px">
            <label for="horaFinalizacion" class="form-label">Fecha de finalizacion</label>
            <input id="fechaFinalizacion" type="date" value="{{registro.fecha_final}}" class="form-control" placeholder="Fecha final"
              aria-label="Fecha final" />
          </div>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3" style="width:100%;padding:0px 20px">
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Lunes" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Lunes" id="Lunes">
            {%else%}
            <input type="checkbox" value="Lunes" id="Lunes">
            {%endif%}
            <label for="Lunes">L</label>
          </div>
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Martes" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Martes" id="Martes">
            {%else%}
            <input type="checkbox" value="Martes" id="Martes">
            {%endif%}
            <label for="Martes">M</label>
          </div>
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Miercoles" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Miercoles" id="Miercoles">
            {%else%}
            <input type="checkbox" value="Miercoles" id="Miercoles">
            {%endif%}
            <label for="Miercoles">M</label>
          </div>
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Jueves" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Jueves" id="Jueves">
            {%else%}
            <input type="checkbox" value="Jueves" id="Jueves">
            {%endif%}
            <label for="Jueves">J</label>
          </div>
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Viernes" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Viernes" id="Viernes">
            {%else%}
            <input type="checkbox" value="Viernes" id="Viernes">
            {%endif%}
            <label for="Viernes">V</label>
          </div>
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Sabado" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Sabado" id="Sabado">
            {%else%}
            <input type="checkbox" value="Sabado" id="Sabado">
            {%endif%}
            <label for="Sabado">S</label>
          </div>
          <div class="d-flex justify-content-center align-items-center flex-column">
            {%if "Domingo" in registro.dias_de_clases%}
            <input type="checkbox" checked value="Domingo" id="Domingo">
            {%else%}
            <input type="checkbox" value="Domingo" id="Domingo">
            {%endif%}
            <label for="Domingo">D</label>
          </div>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3" style="width:100%">
          <div style="width:100%; margin-right:5px">
            <label for="horaInicio" class="form-label">Hora de inicio</label>
            <input id="horaInicio" type="time" value="{{registro.hora_inicial}}" class="form-control" placeholder="Hora inicio" aria-label="Hora inicio" />
          </div>
          <div style="width:100%; margin-left:5px">
            <label for="horaFinalizacion" class="form-label">Hora de finalizacion</label>
            <input id="horaFinalizacion" type="time" value="{{registro.hora_final}}" class="form-control" placeholder="Hora final"
              aria-label="Hora final" />
          </div>
        </div>
        <select class="form-select mb-3" aria-label="Default select example" id="docente">
          {%for i in docentes%}
          <option value="{{i.id}}">{{i.nombres}} {{i.apellido_paterno}}</option>
          {%endfor%}
        </select>
        <select class="form-select mb-3" aria-label="Default select example" id="curso">
          {%for i in cursos%}
          <option value="{{i.codigo}}">{{i.nombre}} {{i.ciclo}}</option>
          {%endfor%}
        </select>
        
        <button type="button" class="btn btn-primary" style="width: 210px" id="async">
          Actualizar
        </button>
      </div>
    </div>
    <script>
      var boton = document.getElementById("async");
    
      boton.addEventListener('click', function () {
    
        var nombre = document.getElementById("nombre");
        var codigo = document.getElementById("codigo");
        var horaInicio = document.getElementById("horaInicio");
        var horaFinalizacion = document.getElementById("horaFinalizacion");
        var fechaInicio = document.getElementById("fechaInicio");
        var fechaFinalizacion = document.getElementById("fechaFinalizacion");
        var docente = document.getElementById("docente");
        var curso = document.getElementById("curso");
    
        var Lunes = document.getElementById("Lunes");
        var Martes = document.getElementById("Martes");
        var Miercoles = document.getElementById("Miercoles");
        var Jueves = document.getElementById("Jueves");
        var Viernes = document.getElementById("Viernes");
        var Sabado = document.getElementById("Sabado");
        var Domingo = document.getElementById("Domingo");
    
        var formData = new FormData();
        var jsonData = { nombre: nombre.value, codigo: codigo.value, horaInicio: horaInicio.value, horaFinalizacion: horaFinalizacion.value, fechaInicio: fechaInicio.value, fechaFinalizacion: fechaFinalizacion.value, docente: docente.value, curso: curso.value, Lunes: Lunes.checked, Martes: Martes.checked, Miercoles: Miercoles.checked, Jueves: Jueves.checked, Viernes: Viernes.checked, Sabado: Sabado.checked, Domingo: Domingo.checked };
    
    
    
        fetch('/grupo/actualizar', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(jsonData)
        })
    
          .then(
            response => response.json()
          )
    
          .then(
            data => {
              alert(data.mensaje);
            }
          )
    
          .catch(error => {
            //debes poner una notificaci贸n e indicar que se cay贸 la conexi贸n con el servidor, que revise su conexi贸n a internet
          })
      })

      document.getElementById("docente").value = "{{registro.docente}}";
      document.getElementById("curso").value = "{{registro.curso}}";
    </script>
    {%endblock%}
    </div>